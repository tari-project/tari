(this["webpackJsonptari-collectibles-web"]=this["webpackJsonptari-collectibles-web"]||[]).push([[0],{179:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(59),c=a.n(r),i=a(15),o=a(43),u=a(9),l=a.n(u),d=a(17),p=a(30),j=a(31),b=a(40),h=a(39),m=a(241),f=a(231),x=a(242),O=a(233),v=a(235),g=a(236),y=a(237),_=a(238),w=a(0);function k(e){var t=e.asset,a=e.heading,n=e.style,s=e.actions;return n=n||{height:"100%",display:"flex",flexDirection:"column"},Object(w.jsxs)(O.a,{sx:n,children:[Object(w.jsx)(v.a,{component:"img",sx:{pb:"5%"},image:t.image_url,alt:"random"}),Object(w.jsxs)(g.a,{sx:{flexGrox:1},children:[Object(w.jsx)(y.a,{gutterBottom:!0,variant:"h5",component:"h2",children:a||t.name}),Object(w.jsx)(y.a,{children:t.description})]}),s?Object(w.jsx)(_.a,{children:s}):Object(w.jsx)("span",{})]})}var S=a(239),C=a(240);function P(){return Object(w.jsx)(S.a,{sx:{display:"flex"},children:Object(w.jsx)(C.a,{})})}var D=a(22);function A(){return(A=Object(d.a)(l.a.mark((function e(t,a,n,s,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("command_assets_create:",r),e.next=3,Object(D.a)("assets_create",{name:t,description:a,image:n,templateIds:s,templateParameters:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("assets_list_owned",{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(d.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("assets_list_registered_assets",{offset:t,count:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("assets_get_registration",{assetPubKey:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(d.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("assets_create_initial_checkpoint",{assetPubKey:t,committee:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("asset_wallets_get_latest_address",{assetPublicKey:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("asset_wallets_create_address",{assetPublicKey:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(d.a)(l.a.mark((function e(t,a,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("asset_wallets_send_to",{assetPublicKey:t,amount:a,toAddress:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("next_asset_public_key",{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(d.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("tip004_mint_token",{assetPublicKey:t,token:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("tip004_list_tokens",{assetPublicKey:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(d.a)(l.a.mark((function e(t,a,n,s){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a,n,s),e.next=3,Object(D.a)("tip721_transfer_from",{assetPublicKey:t,fromAddressId:a,sendToAddress:n,tokenId:s});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(d.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("wallets_create",{passphrase:t,name:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(d.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("wallets_unlock",{id:t,passphrase:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(d.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("wallets_seed_words",{id:t,passphrase:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("wallets_list");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("asset_wallets_create",{assetPublicKey:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("asset_wallets_list",{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("create_db",{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)("asset_wallets_get_balance",{assetPublicKey:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X={command_create_db:function(){return z.apply(this,arguments)},command_assets_create:function(e,t,a,n,s){return A.apply(this,arguments)},command_assets_get_registration:function(e){return I.apply(this,arguments)},command_assets_list_owned:function(){return T.apply(this,arguments)},command_assets_list_registered_assets:function(e,t){return K.apply(this,arguments)},command_asset_create_initial_checkpoint:function(e,t){return F.apply(this,arguments)},command_next_asset_public_key:function(){return N.apply(this,arguments)},command_asset_wallets_create:function(e){return V.apply(this,arguments)},command_asset_wallets_get_balance:function(e){return Q.apply(this,arguments)},command_asset_wallets_list:function(){return H.apply(this,arguments)},command_asset_wallets_get_latest_address:function(e){return M.apply(this,arguments)},command_asset_wallets_create_address:function(e){return R.apply(this,arguments)},command_asset_wallets_send_to:function(e,t,a){return E.apply(this,arguments)},command_tip004_mint_token:function(e,t){return B.apply(this,arguments)},command_tip004_list_tokens:function(e){return L.apply(this,arguments)},command_tip721_transfer_from:function(e,t,a,n){return U.apply(this,arguments)},command_wallets_create:function(e,t){return W.apply(this,arguments)},command_wallets_list:function(){return J.apply(this,arguments)},command_wallets_unlock:function(e,t){return q.apply(this,arguments)},command_wallets_seed_words:function(e,t){return G.apply(this,arguments)}},Y=X;function Z(e){return Array.from(e,(function(e){return("0"+(255&e).toString(16)).slice(-2)})).join("")}var $=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={error:null,isLoading:!1,assets:[]},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,e.next=4,Y.command_assets_list_registered_assets(0,100);case 4:t=e.sent,this.setState({assets:t.map((function(e){return{name:Z(e.unique_id),description:"Asset registration at block #".concat(e.mined_height," (").concat(Z(e.mined_in_block),")"),public_key:e.asset_public_key?Z(e.asset_public_key):"",image_url:"https://source.unsplash.com/random"}})),isLoading:!1}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),this.setState({error:"Could not load assets:"+e.t0,isLoading:!1});case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"renderTokens",value:function(){var e=this.state,t=e.assets;return e.isLoading||0!==t.length?this.state.assets.map((function(e){var t=Object(w.jsx)(m.a,{size:"small",to:"/view/".concat((e.unique_id||"").toString("hex")),children:"View"});return Object(w.jsx)(f.a,{item:!0,xs:12,sm:6,md:4,children:Object(w.jsx)(k,{asset:e,actions:t})},"".concat(e.name,"-").concat(e.public_key))})):Object(w.jsx)("div",{children:"No assets found."})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.error;return Object(w.jsx)(x.a,{maxWidth:"md",sx:{mt:4,mb:4,py:8},children:Object(w.jsxs)(f.a,{container:!0,spacing:4,children:[this.renderTokens(),t?Object(w.jsx)(P,{}):Object(w.jsx)("span",{}),a?Object(w.jsx)("p",{children:a}):Object(w.jsx)("span",{})]})})}}]),a}(s.a.Component),ee=$,te=a(34),ae=a(20),ne=a(137),se=a(243),re=a(228),ce=a(248),ie=a(247),oe=a(249),ue=a(246),le=a(223),de=a(232),pe=a(250),je=a(251),be=a(136),he=a.n(be),me=a(133),fe=a.n(me),xe=a(135),Oe=a.n(xe),ve=a(132),ge=a.n(ve),ye=a(134),_e=a.n(ye),we=a(28),ke=a(19),Se=a(218),Ce=a(227),Pe=a(244),De=a(229),Ae=a(245),Te=a(224),Ke=a(130),Ie=a(77),Fe=a(106),Me=a(107),Re=a(83),Ee=a.n(Re),Ne=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).dropFile=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=t.payload).length>0&&n.addFileToIPFS(a[0]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.save=Object(d.a)(l.a.mark((function e(){var t,a,s,r,c,i,o,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({isSaving:!0}),t=n.state,a=t.name,s=t.description,r=t.image,e.prev=2,c=[1],i=[],!n.state.tip002){e.next=12;break}return console.log("tip002"),c.push(2),console.log(n.state.tip002Data),o={symbol:n.state.tip002Data.symbol,decimals:parseInt(n.state.tip002Data.decimals),totalSupply:parseInt(n.state.tip002Data.totalSupply)},e.next=12,Ee.a.load("proto/tip002.proto").then((function(e){var t=e.lookupType("tip002.InitRequest"),a=t.verify(o);if(a)throw new Error(a);var n=t.create(o);console.log("msg:",n);var s=t.encode(n).finish();console.log("buffer",s),i.push({template_id:2,template_data_version:1,template_data:Array.from(s)})}));case 12:return n.state.tip003&&c.push(3),n.state.tip004&&c.push(4),n.state.tip721&&c.push(721),e.next=17,Y.command_assets_create(a,s,r,c,i);case 17:if(u=e.sent,!n.state.tip003){e.next=23;break}return e.next=21,Y.command_asset_create_initial_checkpoint(u,n.state.tip003Data.committee);case 21:d=e.sent,console.log(d);case 23:n.props.history.push("/assets/manage/".concat(u)),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(2),n.setState({error:"Could not create asset: "+e.t0.message}),console.log(e.t0);case 31:n.setState({isSaving:!1});case 32:case"end":return e.stop()}}),e,null,[[2,27]])}))),n.onNameChanged=function(e){n.setState({name:e.target.value})},n.onTipCheckboxChanged=function(e,t){var a={};a[t]=e.target.checked,n.setState(a)},n.onTip002DataChanged=function(e,t){var a={};a[e]=t.target.value,a=Object(o.a)(Object(o.a)({},n.state.tip002Data),a),n.setState({tip002Data:a})},n.onDescriptionChanged=function(e){n.setState({description:e.target.value})},n.onNewCommitteePubKeyChanged=function(e){n.setState({newCommitteePubKey:e.target.value})},n.onAddCommitteeMember=function(){var e=Object(ke.a)(n.state.tip003Data.committee);e.push(n.state.newCommitteePubKey);var t=Object(o.a)(Object(o.a)({},n.state.tip003Data),{committee:e});console.log(e),n.setState({tip003Data:t,newCommitteePubKey:""})},n.onDeleteCommitteeMember=function(e){var t=n.state.tip003Data.committee.filter((function(t,a,n){return a!==parseInt(e)})),a=Object(o.a)(Object(o.a)({},n.state.tip003Data),{committee:t});n.setState({tip003Data:a})},n.onImageChanged=function(e){n.setState({image:e.target.value})},n.selectFile=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie.a.open({filters:[{name:"image types",extensions:["png","jpg","jpeg","gif"]}],multiple:!1});case 2:return t=e.sent,e.next=5,n.addFileToIPFS(t);case 5:case"end":return e.stop()}}),e)}))),n.addFileToIPFS=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,s,r,c,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split("/"),s=a[a.length-1],r="",e.prev=3,c=new Fe.a("ipfs",["add","-Q",t]),i=!1,c.stdout.on("data",(function(e){i||(i=!0,r=e,new Fe.a("ipfs",["files","cp","/ipfs/".concat(r),"/".concat(s)]).spawn(),n.setState({cid:r}))})),c.stderr.on("data",(function(e){console.error("error: ",e)})),o=c.spawn(),e.abrupt("return",o);case 12:e.prev=12,e.t0=e.catch(3),console.error("catch error: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),n.state={name:"Asset1",description:"",image:"",cid:"",error:"",isSaving:!1,tip001:!0,tip002:!1,tip003:!0,tip004:!1,tip721:!1,tip002Data:{totalSupply:0,symbol:"NAH",decimals:2},tip003Data:{committee:[]},newCommitteePubKey:""},n.cleanup=null,n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.cleanup=Ke.a.listen("tauri://file-drop",this.dropFile),console.log("didmount")}},{key:"componentWillUnmount",value:function(){this.cleanup&&this.cleanup.then((function(e){return e()}))}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(x.a,{maxWidth:"lg",sx:{mt:4,mb:4,py:8},children:[Object(w.jsx)(y.a,{variant:"h3",sx:{mb:"30px"},children:"Create new asset"}),Object(w.jsxs)(Se.a,{children:[this.state.error?Object(w.jsx)(Ce.a,{severity:"error",children:this.state.error}):Object(w.jsx)("span",{}),Object(w.jsx)(y.a,{variant:"h4",children:"Templates Implemented"}),Object(w.jsx)(Pe.a,{control:Object(w.jsx)(De.a,{onChange:this.onTip001Changed,checked:this.state.tip001}),label:"001 Metadata (required)"}),Object(w.jsxs)(Ae.a,{children:[Object(w.jsx)(Te.a,{id:"publicKey",label:"Public Key",variant:"filled",color:"secondary",value:this.state.publicKey,disabled:!0,style:{"-webkit-text-fill-color":"#ddd"}}),Object(w.jsx)(Te.a,{id:"name",label:"Name",variant:"filled",color:"primary",value:this.state.name,onChange:this.onNameChanged,disabled:this.state.isSaving||!this.state.tip001}),Object(w.jsx)(Te.a,{id:"description",label:"Description",variant:"filled",color:"primary",value:this.state.description,onChange:this.onDescriptionChanged,disabled:this.state.isSaving||!this.state.tip001}),Object(w.jsx)("p",{children:"Image"}),Object(w.jsx)(We,{selectFile:this.selectFile,setImage:function(t){return e.setState({image:t})},cid:this.state.cid,setCid:function(t){return e.setState({cid:t})},image:this.state.image})]}),Object(w.jsxs)(Ae.a,{children:[Object(w.jsx)(Pe.a,{control:Object(w.jsx)(De.a,{onClick:function(t){return e.onTipCheckboxChanged(t,"tip002")},checked:this.state.tip002}),label:"002 (ERC 20-like)"}),Object(w.jsx)(Te.a,{id:"tip002_symbol",label:"Symbol",variant:"filled",color:"primary",value:this.state.tip002.symbol,onChange:function(t){return e.onTip002DataChanged("symbol",t)},disabled:this.state.isSaving||!this.state.tip002}),Object(w.jsx)(Te.a,{id:"tip002_total_supply",label:"Total Supply",variant:"filled",color:"primary",value:this.state.tip002.totalSupply,type:"number",onChange:function(t){return e.onTip002DataChanged("totalSupply",t)},disabled:this.state.isSaving||!this.state.tip002}),Object(w.jsx)(Te.a,{id:"tip002_decimals",label:"Decimals",variant:"filled",color:"primary",value:this.state.tip002.decimals,onChange:function(t){return e.onTip002DataChanged("decimals",t)},disabled:this.state.isSaving||!this.state.tip002})]}),Object(w.jsx)(Ae.a,{children:Object(w.jsx)(Pe.a,{control:Object(w.jsx)(De.a,{onClick:this.onTip003Changed,checked:this.state.tip003,disabled:!0}),label:"003 Sidechain with committees"})}),Object(w.jsxs)(Ae.a,{children:[Object(w.jsx)(ue.a,{children:this.state.tip003Data.committee.map((function(e,t){return Object(w.jsx)(re.a,{children:Object(w.jsx)(ie.a,{primary:e})})}))}),Object(w.jsx)(Te.a,{label:"Validator node public key",id:"newCommitteePubKey",value:this.state.newCommitteePubKey,onChange:this.onNewCommitteePubKeyChanged,disabled:this.state.isSaving||!this.state.tip003}),Object(w.jsx)(m.a,{onClick:this.onAddCommitteeMember,disabled:this.state.isSaving||!this.state.tip003,children:"Add"})]}),Object(w.jsx)(Ae.a,{children:Object(w.jsx)(Pe.a,{control:Object(w.jsx)(De.a,{onClick:function(t){return e.onTipCheckboxChanged(t,"tip721")},checked:this.state.tip721}),label:"721 (ERC 721-like)"})}),Object(w.jsx)(Ae.a,{children:Object(w.jsx)(Pe.a,{control:Object(w.jsx)(De.a,{onClick:function(t){return e.onTipCheckboxChanged(t,"tip004")},checked:this.state.tip004}),label:"Allow tokens to be minted after registration (Requires 721)"})}),Object(w.jsx)(m.a,{onClick:this.save,disabled:this.state.isSaving,children:"Save"})]})]})}}]),a}(s.a.Component),Be=function(e){var t=e.setMode;return Object(w.jsxs)("div",{children:[Object(w.jsx)(m.a,{onClick:function(){return t("url")},children:"HTTP or IPFS URL"}),Object(w.jsx)(m.a,{onClick:function(){return t("upload")},children:"Upload file to IPFS"})]})},Le=function(e){var t=e.setImage,a=Object(n.useState)(""),s=Object(i.a)(a,2),r=s[0],c=s[1];return Object(w.jsxs)("div",{children:[Object(w.jsx)("p",{children:"Link to a web or ipfs url"}),Object(w.jsx)(Te.a,{id:"image",label:"Image (url)",variant:"filled",color:"primary",value:r,onChange:function(e){return c(e.target.value)}}),Object(w.jsx)(m.a,{onClick:function(){return t(r)},children:"Save"})]})},Ue=function(e){var t=e.selectFile;return Object(w.jsxs)("div",{children:[Object(w.jsx)("p",{children:"Select an image, or drag and drop an image onto this window"}),Object(w.jsx)(m.a,{onClick:t,children:"Click to Select Image"})]})},We=function(e){var t,a=e.cid,s=e.image,r=e.selectFile,c=e.setImage,o=e.setCid,u=Object(n.useState)(""),l=Object(i.a)(u,2),d=l[0],p=l[1];if(s)return Object(w.jsxs)("div",{children:[Object(w.jsx)("img",{src:s,alt:"",width:"200px"}),Object(w.jsx)("br",{}),Object(w.jsx)("p",{onClick:function(){return c("")},children:"Change"})]});if(a)return Object(w.jsx)(qe,{cid:a,setCid:o});switch(d){case"url":t=Object(w.jsx)(Le,{setImage:c});break;case"upload":t=Object(w.jsx)(Ue,{selectFile:r});break;default:t=Object(w.jsx)(Be,{setMode:function(e){return p(e)}})}return t},qe=function(e){var t=e.cid,a=e.setCid,s=Object(n.useState)(""),r=Object(i.a)(s,2),c=r[0],o=r[1];return Object(n.useMemo)(Object(d.a)(l.a.mark((function e(){var a,n,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Me.b)("http://localhost:5001/api/v0/cat?arg=".concat(t),{method:"POST",responseType:Me.a.Binary});case 3:a=e.sent,n=Uint8Array.from(a.data),s=new Blob([n.buffer]),(r=new FileReader).onloadend=function(){return o(r.result)},r.onerror=function(){return console.error("error")},r.readAsDataURL(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[t]),c?Object(w.jsxs)("div",{children:[Object(w.jsx)("img",{src:c,alt:"",width:"200px"}),Object(w.jsx)("br",{}),Object(w.jsx)("p",{onClick:function(){return a("")},children:"Change"})]}):Object(w.jsx)("p",{children:"ipfs image loading..."})},Ge=Object(ae.h)(Ne),Je=a(221),Ve=a(222),He=(a(179),{width:"20vw",transitionDuration:"0.3s",height:"30vw",margin:"1vw",display:"block",flexDirection:"column"}),ze=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={error:"",ownedAssets:[],favoriteAssets:[]},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({error:""}),e.prev=1,e.next=4,Y.command_assets_list_owned();case 4:t=e.sent,this.setState({ownedAssets:t}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),this.setState({error:"Failed to load assets: "+e.t0});case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(w.jsxs)(x.a,{maxWidth:"lg",sx:{mt:4,mb:4,py:8},children:[this.state.error?Object(w.jsx)(Ce.a,{severity:"error",children:this.state.error}):"",Object(w.jsx)(y.a,{variant:"h3",children:"Assets Issued"}),Object(w.jsx)(f.a,{container:!0,spacing:4,children:this.state.ownedAssets.map((function(e){return Object(w.jsx)(f.a,{item:!0,xs:12,sm:6,md:4,lg:4,children:Object(w.jsxs)(O.a,{style:He,children:[Object(w.jsx)(te.b,{to:"/assets/manage/".concat(e.public_key),children:Object(w.jsx)(v.a,{component:"img",sx:{pb:"5%",height:"20vw",width:"20vw"},image:e.image,alt:"random"})}),Object(w.jsxs)(g.a,{children:[Object(w.jsx)(y.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.name}),Object(w.jsx)(y.a,{children:e.description})]}),Object(w.jsx)(_.a,{children:Object(w.jsx)(te.b,{to:"/assets/manage/".concat(e.public_key),children:"View"})})]})},e.public_key)}))})]})}}]),a}(s.a.Component),Qe=Object(ae.h)(ze),Xe=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={error:"",loading:!0,saving:!1,assetDefinition:{}},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.assetPubKey,e.next=3,Y.command_assets_get_registration(t);case 3:a=e.sent,console.log("registration:",a),n={public_key:t,initialCommittee:a.initialCommitee,checkpointUniqueId:a.checkpointUniqueId,template_parameters:a.features.template_parameters,templateIds:a.features.template_ids_implemented},this.setState({loading:!1,assetDefinition:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(w.jsxs)(x.a,{maxWidth:"lg",sx:{mt:4,mb:4,py:8},children:[Object(w.jsxs)(y.a,{children:["Asset: ",this.props.assetPubKey]}),Object(w.jsx)(S.a,{children:Object(w.jsx)(Ye,{assetPubKey:this.props.assetPubKey,assetDefinition:this.state.assetDefinition})})]})}}]),a}(s.a.Component),Ye=function(e){var t=e.assetPubKey,a=e.assetDefinition,s=Object(n.useState)(""),r=Object(i.a)(s,2),c=r[0],o=r[1],u=Object(n.useState)("Token1"),p=Object(i.a)(u,2),j=p[0],b=p[1],h=!1,f=!1;a.templateIds&&(h=a.templateIds.includes(4),f=a.templateIds.includes(721));var O=JSON.stringify(a,null,2);function v(){return(v=Object(d.a)(l.a.mark((function e(){var a,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,".json"),e.prev=1,e.next=4,Ie.c.homeDir();case 4:return n=e.sent,s="".concat(n).concat(a),e.next=8,Ie.b.writeFile({contents:O,path:s});case 8:o("Asset definition file written to: ".concat(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),o("Error: ".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function g(){return(g=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.command_tip004_mint_token(t,j);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),o("Error: ".concat(e.t0.message));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return Object(w.jsxs)("div",{children:[Object(w.jsx)("p",{children:"Asset Definition"}),Object(w.jsx)("p",{children:c}),Object(w.jsx)("p",{children:"Use this asset definition json file for your validator nodes"}),Object(w.jsx)("pre",{children:O}),Object(w.jsx)(m.a,{id:"download",onClick:function(){return v.apply(this,arguments)},children:"Save asset definition file"}),f?Object(w.jsxs)(x.a,{children:[h?Object(w.jsxs)(Ae.a,{children:[Object(w.jsx)(y.a,{children:"Mint a token"}),Object(w.jsx)(Te.a,{id:"tip004Name",label:"Name/Description",value:j,onChange:function(e){return b(e.target.value)}}),Object(w.jsx)(m.a,{id:"mint",onClick:function(){return g.apply(this,arguments)},children:"Mint"})]}):"",Object(w.jsx)("div",{children:"TODO: get tokens"})]}):""]})};var Ze=Object(ae.h)((function(){var e=Object(ae.g)().assetPubKey;return Object(w.jsx)(Xe,{assetPubKey:e})})),$e=a(234),et=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).refreshBalance=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({error:null}),e.next=3,Y.command_asset_wallets_get_balance(n.state.assetPubKey);case 3:return t=e.sent,console.log("balance",t),n.setState({balance:t}),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)}))),n.refresh721=Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,Y.command_tip004_list_tokens(n.state.assetPubKey);case 3:return a=e.sent,console.log(a),t.tokens=[],e.next=8,a.forEach((function(e){t.tokens.push({tokenId:e[0].token_id,address:e[1].public_key,addressId:e[1].id,token:e[0].token})}));case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)}))),n.onGenerateReceiveAddress=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("hello"),e.prev=1,n.setState({error:null}),e.next=5,Y.command_asset_wallets_create_address(n.state.assetPubKey);case 5:t=e.sent,console.log("new address",t),n.setState({receiveAddress:t.public_key}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),n.setState({error:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),n.onSendToChanged=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({sendToAddress:t.target.value});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onSendToAmountChanged=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({sendToAmount:parseInt(t.target.value)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onSend=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.setState({error:""}),e.next=4,Y.command_asset_wallets_send_to(n.state.assetPubKey,n.state.sendToAmount,n.state.sendToAddress);case 4:return t=e.sent,console.log(t),n.setState({sendToAddress:"",sendToAmount:""}),e.next=9,n.refreshBalance();case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error sending:",e.t0),n.setState({error:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),n.openTip721SendDraft=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({tip721SendDraftId:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.on721Send=function(){var e=Object(d.a)(l.a.mark((function e(t,a){var s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.setState({error:""}),e.next=4,Y.command_tip721_transfer_from(n.state.assetPubKey,t,n.state.sendToAddress,a);case 4:return s=e.sent,console.log(s),e.next=8,n.refresh721();case 8:return r=e.sent,n.setState({tip721Data:r}),e.next=12,n.refreshBalance();case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error sending:",e.t0),n.setState({error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),console.log(e),n.state={error:null,isSaving:!1,tip002:!1,tip004:!1,tip721:!1,tip002Data:{},tip721Data:{},assetPubKey:e.match.params.assetPubKey,balance:-1,receiveAddress:"",sendToAddress:"",tip721SendDraftId:""},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,n,s,r,c,i,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.command_asset_wallets_get_latest_address(this.state.assetPubKey);case 3:return t=e.sent,e.next=6,Y.command_assets_get_registration(this.state.assetPubKey);case 6:if(a=e.sent,console.log(a),n=a.features.template_ids_implemented.includes(2),s=a.features.template_ids_implemented.includes(4),r=a.features.template_ids_implemented.includes(721),c={},!n){e.next=19;break}return e.next=15,this.refreshBalance();case 15:return i=a.features.template_parameters,o=i.filter((function(e){return 2===e.template_id}))[0],e.next=19,Ee.a.load("/proto/tip002.proto").then((function(e){var t=e.lookupType("tip002.InitRequest"),a=t.decode(o.template_data);c=t.toObject(a,{}),console.log(c)}));case 19:if(u={},!s){e.next=24;break}return e.next=23,this.refresh721();case 23:u=e.sent;case 24:this.setState({receiveAddress:t.public_key,tip002:n,tip004:s,tip721:r,tip002Data:c,tip721Data:u}),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(0),console.error(e.t0),this.setState({error:e.t0.message});case 31:case"end":return e.stop()}}),e,this,[[0,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(w.jsx)(x.a,{sx:{mt:4,mb:4},children:Object(w.jsxs)(f.a,{container:!0,spacing:2,children:[Object(w.jsxs)(f.a,{item:!0,xs:12,children:[this.state.error?Object(w.jsx)(Ce.a,{severity:"error",children:this.state.error}):Object(w.jsx)("span",{}),Object(w.jsx)(y.a,{variant:"h3",sx:{mb:"30px"},children:"Asset Details"}),Object(w.jsxs)(x.a,{children:[Object(w.jsx)(y.a,{variant:"h4",children:"Info"}),Object(w.jsxs)(Se.a,{spacing:"2",children:[Object(w.jsxs)(y.a,{children:["Pub key: ",this.state.assetPubKey]}),Object(w.jsxs)(y.a,{children:["Receive Address: ",this.state.receiveAddress]}),Object(w.jsx)(m.a,{onClick:this.onGenerateReceiveAddress,children:"Generate new receive address"})]})]})]}),Object(w.jsx)(f.a,{item:!0,xs:3,hidden:!this.state.tip002,children:Object(w.jsx)($e.a,{children:Object(w.jsx)(x.a,{sx:{pt:2},children:Object(w.jsxs)(Se.a,{spacing:2,children:[Object(w.jsx)(y.a,{variant:"h5",children:"TIP002"}),Object(w.jsxs)(y.a,{children:["Balance: ",this.state.balance/Math.pow(10,this.state.tip002Data.decimals)," ",this.state.tip002Data.symbol]}),Object(w.jsx)("h6",{children:"Send"}),Object(w.jsx)(Te.a,{onChange:this.onSendToChanged,value:this.state.sendToAddress,label:"Receiver address"}),Object(w.jsx)(Te.a,{onChange:this.onSendToAmountChanged,value:this.state.sendToAmount,type:"number",label:"Amount"}),Object(w.jsx)(m.a,{onClick:this.onSend,children:"Send"})]})})})}),this.state.tip721?Object(w.jsx)(f.a,{item:!0,xs:12,hidden:!this.state.tip721,children:Object(w.jsxs)(Se.a,{spacing:2,children:[Object(w.jsx)(y.a,{variant:"h5",children:"TIP721"}),Object(w.jsx)(f.a,{container:!0,spacing:2,children:this.state.tip721Data.tokens.map((function(t){return Object(w.jsx)(f.a,{item:!0,xs:2,children:Object(w.jsx)($e.a,{children:Object(w.jsx)(x.a,{children:Object(w.jsxs)(Se.a,{spacing:2,children:[Object(w.jsxs)(y.a,{variant:"h6",children:["#",t.tokenId,": ",t.token]}),Object(w.jsx)(m.a,{onClick:function(a){return e.openTip721SendDraft(t.tokenId)},children:"Send"}),e.state.tip721SendDraftId===t.tokenId?Object(w.jsx)($e.a,{elevation:2,children:Object(w.jsx)(x.a,{children:Object(w.jsxs)(Se.a,{spacing:2,children:[Object(w.jsx)(Te.a,{value:e.state.sendToAddress,onChange:e.onSendToChanged,label:"To"}),Object(w.jsx)(m.a,{onClick:function(a){return e.on721Send(t.addressId,t.tokenId)},children:"Submit"})]})})}):""]})})})})}))})]})}):""]})})}}]),a}(s.a.Component),tt=Object(ae.h)(et),at=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onAssetPublicKeyChanged=function(e){n.setState({assetPublicKey:e.target.value})},n.onSave=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n.state.assetPublicKey),n.setState({isSaving:!0,error:null}),e.prev=3,e.next=6,Y.command_asset_wallets_create(n.state.assetPublicKey);case 6:return a=n.props.history,s="/assets/watched/details/".concat(n.state.assetPublicKey),console.log(s),a.push(s),e.abrupt("return");case 13:e.prev=13,e.t0=e.catch(3),n.setState({error:e.t0.message}),console.error(e.t0);case 17:n.setState({isSaving:!1});case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),n.state={error:null,isSaving:!1,assetPublicKey:""},n}return Object(j.a)(a,[{key:"render",value:function(){return Object(w.jsxs)(x.a,{maxWidth:"lg",sx:{mt:4,mb:4,py:8},children:[Object(w.jsx)(y.a,{variant:"h3",sx:{mb:"30px"},children:"New asset account"}),Object(w.jsxs)(Se.a,{children:[this.state.error?Object(w.jsx)(Ce.a,{severity:"error",children:this.state.error}):Object(w.jsx)("span",{}),Object(w.jsx)(Te.a,{id:"publicKey",label:"Asset Public Key",variant:"filled",color:"primary",value:this.state.assetPublicKey,onChange:this.onAssetPublicKeyChanged,disabled:this.state.isSaving}),Object(w.jsx)(m.a,{onClick:this.onSave,disabled:this.state.isSaving,children:"Save"})]})]})}}]),a}(s.a.Component),nt=Object(ae.h)(at),st=function(e){var t=e.wallet,a=e.password,s=e.history,r=Object(n.useState)([]),c=Object(i.a)(r,2),o=c[0],u=c[1],l=Object(n.useState)(""),d=Object(i.a)(l,2),p=d[0],j=d[1];Object(n.useEffect)((function(){Y.command_wallets_seed_words(t.id,a).then((function(e){return u(e)})).catch((function(e){console.error("error: ",e),j(e.message)}))}),[t.id,a]);return Object(w.jsxs)("div",{children:[Object(w.jsx)(y.a,{variant:"h3",sx:{mb:"30px"},children:"Seed words"}),p?Object(w.jsx)(Ce.a,{severity:"error",children:p}):Object(w.jsx)("span",{}),Object(w.jsx)("p",{children:"Save these seed words securely. This is the recovery phrase for this wallet."}),function(e){if(console.log(e),0===e.length)return Object(w.jsx)(P,{});var t=function(e,t){for(var a=[],n=0,s=e.length;n<s;)a.push(e.slice(n,n+=t));return a}(e,6);return Object(w.jsx)("div",{children:t.map((function(e,t){return Object(w.jsx)("pre",{children:e.join(" ")},t)}))})}(o),Object(w.jsx)(m.a,{disabled:0===o.length,onClick:function(){return s.push("/dashboard")},children:"I have saved my seed words"})]})},rt=function(e){var t=e.history,a=Object(n.useState)(""),s=Object(i.a)(a,2),r=s[0],c=s[1],o=Object(n.useState)(""),u=Object(i.a)(o,2),p=u[0],j=u[1],b=Object(n.useState)(!1),h=Object(i.a)(b,2),f=h[0],x=h[1],O=Object(n.useState)(void 0),v=Object(i.a)(O,2),g=v[0],_=v[1],k=Object(n.useState)(""),S=Object(i.a)(k,2),C=S[0],P=S[1];if(g)return Object(w.jsx)(st,{wallet:g,password:r,history:t});var D=!1,A="Passwords must match.";r===p&&(D=!0,A="");var T=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,Y.command_wallets_create(r,"main");case 4:t=e.sent,console.log("wallet",t),_(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),P(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)(y.a,{variant:"h3",sx:{mb:"30px"},children:"Create new wallet"}),Object(w.jsxs)(Se.a,{children:[C?Object(w.jsx)(Ce.a,{severity:"error",children:C}):Object(w.jsx)("span",{}),Object(w.jsxs)(Ae.a,{children:[Object(w.jsx)(Te.a,{id:"password",type:"password",label:"Password",variant:"filled",color:"primary",value:r,onChange:function(e){return c(e.target.value)}}),Object(w.jsx)(Te.a,{id:"password2",type:"password",label:"Confirm Password",variant:"filled",color:"primary",value:p,helperText:A,error:!D,onChange:function(e){return j(e.target.value)}}),Object(w.jsx)(m.a,{disabled:!D||f,onClick:T,children:"Create wallet"})]})]})]})},ct=Object(ae.h)((function(e){var t=e.history,a=e.setAuthenticated,s=Object(ae.g)().id,r=Object(n.useState)(""),c=Object(i.a)(r,2),o=c[0],u=c[1],p=Object(n.useState)(!1),j=Object(i.a)(p,2),b=j[0],h=j[1],f=Object(n.useState)(""),O=Object(i.a)(f,2),v=O[0],g=O[1],_=""!==v,k=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,Y.command_wallets_unlock(s,o);case 4:a(s,o),t.push("/dashboard"),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("error: ",e.t0),h(!1),g(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)(x.a,{maxWidth:"md",sx:{mt:4,mb:4,py:8},children:[Object(w.jsx)(y.a,{variant:"h3",sx:{mb:"30px"},children:"Unlock wallet"}),Object(w.jsx)(Se.a,{children:Object(w.jsxs)(Ae.a,{children:[Object(w.jsx)(Te.a,{id:"password",type:"password",label:"Password",variant:"filled",color:"primary",value:o,error:_,helperText:v,onChange:function(e){u(e.target.value),g("")}}),Object(w.jsx)(m.a,{disabled:b,onClick:k,children:"Unlock"})]})})]})})),it=Object(ae.h)((function(e){var t=e.history,a=Object(n.useState)(!0),s=Object(i.a)(a,2),r=s[0],c=s[1];return Object(n.useEffect)((function(){Y.command_wallets_list().then((function(e){if(console.log("wallets",e),e.length>0){var a=e[0];t.push("/wallets/".concat(a.id))}else c(!1)})).catch((function(e){console.error("wallets_list error:",e)}))}),[t]),r?Object(w.jsx)(P,{}):Object(w.jsx)(x.a,{maxWidth:"md",sx:{mt:4,mb:4,py:8},children:Object(w.jsx)(rt,{history:t})})})),ot=Object(ne.a)({palette:{mode:"dark",primary:Je.a,secondary:Ve.a}});function ut(e){var t=e.icon,a=e.to,s=n.useMemo((function(){return n.forwardRef((function(e,t){return Object(w.jsx)(te.b,Object(o.a)(Object(o.a)({to:a,ref:t},e),{},{role:void 0}))}))}),[a]);return Object(w.jsx)(se.a,{edge:"end","aria-label":"add",component:s,children:t})}function lt(e){var t=e.icon,a=e.primary,s=e.to,r=n.useMemo((function(){return n.forwardRef((function(e,t){return Object(w.jsx)(te.b,Object(o.a)(Object(o.a)({to:s,ref:t},e),{},{role:void 0}))}))}),[s]);return Object(w.jsxs)(re.a,{button:!0,component:r,children:[t?Object(w.jsx)(ce.a,{children:t}):null,Object(w.jsx)(ie.a,{primary:a})]})}var dt=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)(""),o=Object(i.a)(c,2),u=o[0],l=o[1];return Object(n.useEffect)((function(){console.log("refreshing accounts"),l(""),Y.command_asset_wallets_list().then((function(e){console.log("accounts",e),r(e)})).catch((function(e){console.error("accounts_list error:",e),l(e.message)}))}),[e.walletId]),Object(w.jsxs)("div",{children:[Object(w.jsx)(oe.a,{children:Object(w.jsx)(re.a,{component:"div",disableGutters:!0,secondaryAction:Object(w.jsx)(ut,{icon:Object(w.jsx)(ge.a,{}),to:"/accounts/new"}),children:"My Assets"})}),u?Object(w.jsx)(re.a,{children:u}):"",Object(w.jsx)(ue.a,{children:s.map((function(e){return Object(w.jsx)(lt,{primary:e.name||e.assetPublicKey,to:"/accounts/".concat(e.asset_public_key)})}))})]})},pt=function(e){var t=e.authenticated,a=e.path,n=e.children;return t?Object(w.jsx)(ae.b,{path:a,children:n}):Object(w.jsx)(ae.a,{to:"/unlock"})};var jt=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(!1),c=Object(i.a)(r,2),o=c[0],u=c[1],l=Object(n.useState)(""),d=Object(i.a)(l,2),p=d[0],j=d[1],b=Object(n.useState)(""),h=Object(i.a)(b,2),m=(h[0],h[1]);return Object(n.useEffect)((function(){Y.command_create_db().then((function(e){return s(!1)})).catch((function(e){return console.error(e)}))}),[]),a?Object(w.jsx)(P,{}):Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(te.a,{children:Object(w.jsx)(we.c,{theme:ot,children:Object(w.jsxs)(S.a,{sx:{display:"flex"},children:[Object(w.jsx)(le.a,{}),Object(w.jsxs)(de.a,{variant:"permanent",children:[Object(w.jsx)(te.b,{to:"/",children:Object(w.jsx)(pe.a,{sx:{display:"flex",color:"white"},children:"Tari Collectibles"})}),Object(w.jsxs)(ue.a,{children:[Object(w.jsx)(lt,{primary:"Dashboard",to:"/dashboard",icon:Object(w.jsx)(fe.a,{})}),Object(w.jsx)(je.a,{}),Object(w.jsx)(dt,{walletId:p}),Object(w.jsx)(oe.a,{children:"Issued Assets"}),Object(w.jsx)(lt,{primary:"Manage",to:"/manage",icon:Object(w.jsx)(_e.a,{})}),Object(w.jsx)(lt,{primary:"Create",to:"/create",icon:Object(w.jsx)(Oe.a,{})}),Object(w.jsx)(je.a,{}),Object(w.jsx)(oe.a,{children:"My Wallet"}),Object(w.jsx)(lt,{primary:"Main",to:"/wallets/".concat(p),icon:Object(w.jsx)(he.a,{})})]})]}),Object(w.jsx)(S.a,{component:"main",sx:{flexGrow:1,height:"100vh",overflow:"auto"},children:Object(w.jsxs)(ae.d,{children:[Object(w.jsx)(pt,{path:"/accounts/new",authenticated:o,children:Object(w.jsx)(nt,{})}),Object(w.jsx)(pt,{path:"/accounts/:assetPubKey",authenticated:o,children:Object(w.jsx)(tt,{})}),Object(w.jsx)(pt,{path:"/create",authenticated:o,children:Object(w.jsx)(Ge,{})}),Object(w.jsx)(pt,{path:"/manage",authenticated:o,children:Object(w.jsx)(Qe,{})}),Object(w.jsx)(pt,{path:"/assets/manage/:assetPubKey",authenticated:o,children:Object(w.jsx)(Ze,{})}),Object(w.jsx)(ae.b,{path:"/wallets/:id",children:Object(w.jsx)(ct,{setAuthenticated:function(e,t){j(e),m(t),u(!0)}})}),Object(w.jsx)(ae.b,{path:"/unlock",children:Object(w.jsx)(it,{})}),Object(w.jsx)(ae.b,{path:"/",children:Object(w.jsx)(ee,{})})]})})]})})})})},bt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,253)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(jt,{})}),document.getElementById("root")),bt()}},[[180,1,2]]]);
//# sourceMappingURL=main.f4daf2d0.chunk.js.map